;-----------------------------------------------------------------------------
;
; (c) 1986-2025 Wolfgang G. Rei√ünegger <w.reissnegger@gmx.net>
; 
; Project: https://github.com/egnagflow/vmon
; License: https://github.com/egnagflow/vmon/blob/main/LICENSE
;
;-----------------------------------------------------------------------------

;-----------------------------------------------------------------------------
;
; Vector handling macros
;
;-----------------------------------------------------------------------------

;-----------------------------------------------------------------------------
; Get / Set
;-----------------------------------------------------------------------------
.macro vec_get_ay vec
        ldy vec
        lda vec+1
.endmacro

;-----------------------------------------------------------------------------
.macro vec_set_ay vec
        sty vec
        sta vec+1
.endmacro

;-----------------------------------------------------------------------------
.macro vec_set vec, val
        lda #<val
        sta vec
        lda #>val
        sta vec+1
.endmacro

;-----------------------------------------------------------------------------
; Increment / Decrement
;-----------------------------------------------------------------------------
.macro vec_inc vec
        inc vec
        bne :+
        inc vec+1
:
.endmacro

;-----------------------------------------------------------------------------
.macro vec_dec vec
        lda vec
        bne :+
        dec vec+1
:
        dec vec
.endmacro

;-----------------------------------------------------------------------------
; Add / Sub
;-----------------------------------------------------------------------------
.macro vec_add_i8 vec, val
        lda vec
        clc
        adc #val
        sta vec
        bcc :+
        inc vec+1
:
.endmacro

;-----------------------------------------------------------------------------
.macro vec_add_i16 vec, val
        lda vec
        clc
        adc #<val
        sta vec
        lda vec+1
        add #>val
        sta vec+1
.endmacro

;-----------------------------------------------------------------------------
.macro vec_sub_i8 vec, val
        lda vec
        sec
        sbc #val
        sta vec
        bcs :+
        dec vec+1
:
.endmacro


;-----------------------------------------------------------------------------
; Comparison
;-----------------------------------------------------------------------------
.macro vec_cmp vec1, vec2
        lda vec1
        cmp vec2
        lda vec1+1
        sbc vec2+1
.endmacro

;-----------------------------------------------------------------------------
.macro vec_cmp_i16 vec, val
        lda vec
        cmp #<val
        lda vec+1
        sbc #>val
.endmacro
